name: Convert TXT to JSON

on:
  push:
    branches:
      - main

jobs:
  convert:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: 3.x

    - name: Convert TXT to JSON
      run: |
        python -c "
import json

with open('direct.txt', 'r') as txt_file:
    lines = txt_file.readlines()

data = [line.strip() for line in lines if line.strip()]

with open('direct.json', 'w') as json_file:
    json.dump(data, json_file, indent=4)
        "

    - name: Commit and Push changes
      run: |
        git config --global user.name 'github-actions'
        git config --global user.email 'github-actions@github.com'
        git add direct.json
        git commit -m 'Convert TXT to JSON'
        git push
